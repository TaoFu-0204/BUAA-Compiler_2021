# <center>编译技术设计文档</center>

<center>18375200 刘裕炜</center>

## 一、词法分析

### 程序架构

* `Exceptions/LexicalException.java`

  * 异常类，用于词法分析时记录遇到的错误，为后续的错误处理留下可能的接口。
  * 唯一的属性为`lineNum`，在抛出时记录当前错误行号。

* `SyntaxClasses.Token.java`

  * 38个常量，代表38种Token类型。
  * 常量数组`typeNames`，为每种类型对应的名称，输出时用。

  * 属性`type`， `int`类型，记录当前Token类型；
  * 属性`lineNo`，`int`类型，记录该Token出现的行号；
  * 属性`context`，`String`类型，记录该Token实际代表的字符串。
  * 方法`toString`，用于输出调用，输出词法分析题目所需的内容。

* `ReadFile.java`

  * 属性`fileInputStream`，`FileInputStream`类型，用于作为文件输入流；
  * 属性`filePath`，`String`类型，用于提供读入文件地址。
  * 构造方法带一个`String`类型参数，指明待读取的文本文件地址。
  * 方法`readFile()`，返回`StringBuilder`类型，用于读取代码并消除注释。

* `LexicalAnalyzer.java`

  * 属性`progranStr`，`StringBuilder`类型，为待分析的程序代码；
  * 属性`tokenList`，`Linkedlist<SyntaxClasses.Token>`类型，为处理过程中以及最后将返回的按序存储Token的链表。
  * 构造方法。
  * 方法`setProgramStr(StringBuilder programStr)`，设置`programStr`属性，即导入程序文本。
  * 方法`getTokenList()`，返回已处理好的Token链表。
  * 方法`isDigit(char c)`，判断`c`是否为0~9的数字字符。
  * 方法`isIdentNonDigit(char c)`，判断`c`是否为大小写字母或下划线。
  * 方法`isIdentChar(char c)`，判断`c`是否为Ident中允许出现的字符类型。
  * 方法`isSpace(char c)`，判断`c`是否为有效空白符。
  * 方法`lexicalAnalyze()`，执行词法分析，生成Token链表。
  * 方法`identAnalyze(int lineNum, String identStr)`，分析当前字符串是保留字还是Ident。

### 实现流程



### 设计修改

